{"ast":null,"code":"import _objectSpread from\"C:/Users/fokin/Documents/Coding/16-9 React Quiz/quizzical/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/fokin/Documents/Coding/16-9 React Quiz/quizzical/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Question from\"./Question\";import{nanoid}from\"nanoid\";import{decode}from\"html-entities\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Quiz(props){var _React$useState=React.useState(getInitialData()),_React$useState2=_slicedToArray(_React$useState,2),quizData=_React$useState2[0],setQuizData=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),numberOfCorrectResults=_React$useState4[0],setNumberOfCorrectResults=_React$useState4[1];var allQuestions=props.allQuestions,isCompleted=props.isCompleted,setIsCompleted=props.setIsCompleted,restarted=props.restarted,setRestarted=props.setRestarted;function getInitialData(){var newArr=[];for(var i=0;i<props.allQuestions.length;i++){newArr.push({name:\"question\".concat(i),correctAnswer:decode(props.allQuestions[i].correctAnswer),isChosen:\"\",isCorrect:false,isWrong:false});}return newArr;}function updateData(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setQuizData(function(prevData){return prevData.map(function(data){return name===data.name?_objectSpread(_objectSpread({},data),{},{isChosen:value}):data;});});}function checkAnswers(){var allCorrectAnswers=[];props.allQuestions.map(function(q){allCorrectAnswers.push(q.correctAnswer);});var _loop=function _loop(i){if(allCorrectAnswers[i]!==quizData[i].isChosen){setQuizData(function(prevData){return prevData.map(function(data){return allCorrectAnswers[i]===data.correctAnswer?_objectSpread(_objectSpread({},data),{},{isWrong:!data.isWrong}):data;});});}else if(allCorrectAnswers[i]===quizData[i].isChosen){setQuizData(function(prevData){return prevData.map(function(data){return allCorrectAnswers[i]===data.correctAnswer?_objectSpread(_objectSpread({},data),{},{isCorrect:!data.isCorrect}):data;});});}else if(quizData[i].isChosen===\"\"){return{v:void 0};}};for(var i=0;i<allCorrectAnswers.length;i++){var _ret=_loop(i);if(typeof _ret===\"object\")return _ret.v;}}React.useEffect(function(){var numberOfCorrectResults=[];quizData.map(function(q){return q.isCorrect?numberOfCorrectResults.push(q):\"\";});setNumberOfCorrectResults(numberOfCorrectResults.length);},[isCompleted]);function renderResults(event){event.preventDefault();checkAnswers();setIsCompleted(true);}function resetQuiz(event){event.preventDefault();setRestarted(function(prevData){return!prevData;});setIsCompleted(false);}React.useEffect(function(){setQuizData(getInitialData());},[props.allQuestions]);// console.log(quizData)\nvar allQuestionsElement=props.allQuestions.map(function(q){var question=q.question,allAnswers=q.allAnswers;var index=props.allQuestions.indexOf(q);return/*#__PURE__*/_jsx(Question,{question:question,allAnswers:allAnswers,quizData:quizData,name:\"question\"+index,updateData:updateData,questionNumber:index,isCompleted:isCompleted},nanoid());});return/*#__PURE__*/_jsxs(\"form\",{className:\"quiz--form\",children:[allQuestionsElement,isCompleted&&/*#__PURE__*/_jsxs(\"h3\",{className:\"quiz--result\",children:[\"You scored \",numberOfCorrectResults,\" of \",quizData.length,\" correct answers\"]}),!isCompleted&&/*#__PURE__*/_jsx(\"button\",{className:\"quiz--btn\",onClick:renderResults,children:\"CHECK ANSWERS\"}),isCompleted&&/*#__PURE__*/_jsx(\"button\",{className:\"quiz--btn\",onClick:resetQuiz,children:\"CONTINUE\"})]});}","map":{"version":3,"names":["React","Question","nanoid","decode","Quiz","props","useState","getInitialData","quizData","setQuizData","numberOfCorrectResults","setNumberOfCorrectResults","allQuestions","isCompleted","setIsCompleted","restarted","setRestarted","newArr","i","length","push","name","correctAnswer","isChosen","isCorrect","isWrong","updateData","event","target","value","prevData","map","data","checkAnswers","allCorrectAnswers","q","useEffect","renderResults","preventDefault","resetQuiz","allQuestionsElement","question","allAnswers","index","indexOf"],"sources":["C:/Users/fokin/Documents/Coding/16-9 React Quiz/quizzical/src/components/Quiz.js"],"sourcesContent":["import React from \"react\"\nimport Question from \"./Question\"\nimport { nanoid } from \"nanoid\"\nimport { decode } from \"html-entities\"\n\nexport default function Quiz(props) {\n\n    const [quizData, setQuizData] = React.useState(getInitialData())\n    const [numberOfCorrectResults, setNumberOfCorrectResults] = React.useState(0)\n\n    const { allQuestions, isCompleted, setIsCompleted, restarted, setRestarted } = props\n\n    function getInitialData() {\n        const newArr = []\n        for (let i = 0; i < props.allQuestions.length; i++) {\n            newArr.push({\n                name: `question${i}`,\n                correctAnswer: decode(props.allQuestions[i].correctAnswer),\n                isChosen: \"\",\n                isCorrect: false,\n                isWrong: false,\n            })\n        }\n        return newArr\n    }\n\n    function updateData(event) {\n        const { name, value } = event.target\n        setQuizData(prevData => prevData.map(data => {\n            return name === data.name ? {\n                ...data,\n                isChosen: value,\n            } : data\n        }))\n    }\n\n    function checkAnswers() {\n        const allCorrectAnswers = []\n        props.allQuestions.map(q => {\n            allCorrectAnswers.push(q.correctAnswer)\n        })\n\n        for (let i = 0; i < allCorrectAnswers.length; i++) {\n\n            if (allCorrectAnswers[i] !== quizData[i].isChosen) {\n                setQuizData(prevData => prevData.map(data => {\n                    return (allCorrectAnswers[i] === data.correctAnswer) ?\n                        {\n                            ...data,\n                            isWrong: !data.isWrong\n                        } : data\n                }))\n            } else if (allCorrectAnswers[i] === quizData[i].isChosen) {\n                setQuizData(prevData => prevData.map(data => {\n                    return (allCorrectAnswers[i] === data.correctAnswer) ?\n                        {\n                            ...data,\n                            isCorrect: !data.isCorrect\n                        } : data\n                }))\n            } else if (quizData[i].isChosen === \"\") {\n                return\n            }\n        }\n    }\n\n    React.useEffect(() => {\n        const numberOfCorrectResults = []\n        quizData.map(q => q.isCorrect ? numberOfCorrectResults.push(q) : \"\")\n        setNumberOfCorrectResults(numberOfCorrectResults.length)\n    }, [isCompleted])\n\n    function renderResults(event) {\n        event.preventDefault()\n        checkAnswers()\n        setIsCompleted(true)\n    }\n\n    function resetQuiz(event) {\n        event.preventDefault()\n        setRestarted(prevData => !prevData)\n        setIsCompleted(false)\n    }\n\n    React.useEffect(() => {\n        setQuizData(getInitialData())\n    }, [props.allQuestions])\n\n    // console.log(quizData)\n\n    const allQuestionsElement = props.allQuestions.map(q => {\n        const { question, allAnswers } = q\n        const index = props.allQuestions.indexOf(q)\n        return (\n            <Question\n                key={nanoid()}\n                question={question}\n                allAnswers={allAnswers}\n                quizData={quizData}\n                name={\"question\" + index}\n                updateData={updateData}\n                questionNumber={index}\n                isCompleted={isCompleted}\n            />\n        )\n    })\n\n    return (\n        <form className=\"quiz--form\">\n            {allQuestionsElement}\n            {isCompleted && <h3 className=\"quiz--result\">You scored {numberOfCorrectResults} of {quizData.length} correct answers</h3>}\n            {!isCompleted && <button className=\"quiz--btn\" onClick={renderResults}>CHECK ANSWERS</button>}\n            {isCompleted && <button className=\"quiz--btn\" onClick={resetQuiz}>CONTINUE</button>}\n        </form>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}