{"ast":null,"code":"import _objectSpread from\"C:/Users/fokin/Documents/Coding/16-9 React Quiz/quizzical/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/fokin/Documents/Coding/16-9 React Quiz/quizzical/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Question from\"./Question\";import{nanoid}from\"nanoid\";import{decode}from\"html-entities\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Quiz(props){var _React$useState=React.useState(getInitialData()),_React$useState2=_slicedToArray(_React$useState,2),quizData=_React$useState2[0],setQuizData=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),numberOfCorrectResults=_React$useState4[0],setNumberOfCorrectResults=_React$useState4[1];var allQuestions=props.allQuestions,isCompleted=props.isCompleted,setIsCompleted=props.setIsCompleted,restarted=props.restarted,setRestarted=props.setRestarted;function getInitialData(){var newArr=[];for(var i=0;i<props.allQuestions.length;i++){newArr.push({name:\"question\".concat(i),correctAnswer:decode(props.allQuestions[i].correctAnswer),isChosen:\"\",isCorrect:false,isWrong:false});}return newArr;}function updateData(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setQuizData(function(prevData){return prevData.map(function(data){return name===data.name?_objectSpread(_objectSpread({},data),{},{isChosen:value}):data;});});}function checkAnswers(){var allCorrectAnswers=[];props.allQuestions.map(function(q){allCorrectAnswers.push(q.correctAnswer);});var _loop=function _loop(i){if(allCorrectAnswers[i]!==quizData[i].isChosen){setQuizData(function(prevData){return prevData.map(function(data){return allCorrectAnswers[i]===data.correctAnswer?_objectSpread(_objectSpread({},data),{},{isWrong:!data.isWrong}):data;});});}else if(allCorrectAnswers[i]===quizData[i].isChosen){setQuizData(function(prevData){return prevData.map(function(data){return allCorrectAnswers[i]===data.correctAnswer?_objectSpread(_objectSpread({},data),{},{isCorrect:!data.isCorrect}):data;});});}else if(quizData[i].isChosen===\"\"){return{v:void 0};}};for(var i=0;i<allCorrectAnswers.length;i++){var _ret=_loop(i);if(typeof _ret===\"object\")return _ret.v;}}React.useEffect(function(){var numberOfCorrectResults=[];quizData.map(function(q){return q.isCorrect?numberOfCorrectResults.push(q):\"\";});setNumberOfCorrectResults(numberOfCorrectResults.length);},[isCompleted]);function renderResults(event){event.preventDefault();checkAnswers();setIsCompleted(true);}function resetQuiz(event){event.preventDefault();setRestarted(function(prevData){return!prevData;});setIsCompleted(false);}React.useEffect(function(){setQuizData(getInitialData());},[props.allQuestions]);// console.log(quizData)\nvar allQuestionsElement=props.allQuestions.map(function(q){var question=q.question,allAnswers=q.allAnswers;var index=props.allQuestions.indexOf(q);return/*#__PURE__*/_jsx(Question,{question:question,allAnswers:allAnswers,quizData:quizData,name:\"question\"+index,updateData:updateData,questionNumber:index,isCompleted:isCompleted},nanoid());});return/*#__PURE__*/_jsxs(\"form\",{className:\"quiz--form\",children:[allQuestionsElement,isCompleted&&/*#__PURE__*/_jsxs(\"h3\",{className:\"quiz--result\",children:[\"You scored \",numberOfCorrectResults,\" of \",quizData.length,\" correct answers\"]}),!isCompleted&&/*#__PURE__*/_jsx(\"button\",{className:\"quiz--btn\",onClick:renderResults,children:\"CHECK ANSWERS\"}),isCompleted&&/*#__PURE__*/_jsx(\"button\",{className:\"quiz--btn\",onClick:resetQuiz,children:\"CONTINUE\"})]});}","map":{"version":3,"names":["React","Question","nanoid","decode","Quiz","props","useState","getInitialData","quizData","setQuizData","numberOfCorrectResults","setNumberOfCorrectResults","allQuestions","isCompleted","setIsCompleted","restarted","setRestarted","newArr","i","length","push","name","correctAnswer","isChosen","isCorrect","isWrong","updateData","event","target","value","prevData","map","data","checkAnswers","allCorrectAnswers","q","useEffect","renderResults","preventDefault","resetQuiz","allQuestionsElement","question","allAnswers","index","indexOf"],"sources":["C:/Users/fokin/Documents/Coding/16-9 React Quiz/quizzical/src/components/Quiz.js"],"sourcesContent":["import React from \"react\"\nimport Question from \"./Question\"\nimport { nanoid } from \"nanoid\"\nimport { decode } from \"html-entities\"\n\nexport default function Quiz(props) {\n\n    const [quizData, setQuizData] = React.useState(getInitialData())\n    const [numberOfCorrectResults, setNumberOfCorrectResults] = React.useState(0)\n\n    const { allQuestions, isCompleted, setIsCompleted, restarted, setRestarted } = props\n\n    function getInitialData() {\n        const newArr = []\n        for (let i = 0; i < props.allQuestions.length; i++) {\n            newArr.push({\n                name: `question${i}`,\n                correctAnswer: decode(props.allQuestions[i].correctAnswer),\n                isChosen: \"\",\n                isCorrect: false,\n                isWrong: false,\n            })\n        }\n        return newArr\n    }\n\n    function updateData(event) {\n        const { name, value } = event.target\n        setQuizData(prevData => prevData.map(data => {\n            return name === data.name ? {\n                ...data,\n                isChosen: value,\n            } : data\n        }))\n    }\n\n    function checkAnswers() {\n        const allCorrectAnswers = []\n        props.allQuestions.map(q => {\n            allCorrectAnswers.push(q.correctAnswer)\n        })\n\n        for (let i = 0; i < allCorrectAnswers.length; i++) {\n\n            if (allCorrectAnswers[i] !== quizData[i].isChosen) {\n                setQuizData(prevData => prevData.map(data => {\n                    return (allCorrectAnswers[i] === data.correctAnswer) ?\n                        {\n                            ...data,\n                            isWrong: !data.isWrong\n                        } : data\n                }))\n            } else if (allCorrectAnswers[i] === quizData[i].isChosen) {\n                setQuizData(prevData => prevData.map(data => {\n                    return (allCorrectAnswers[i] === data.correctAnswer) ?\n                        {\n                            ...data,\n                            isCorrect: !data.isCorrect\n                        } : data\n                }))\n            } else if (quizData[i].isChosen === \"\") {\n                return\n            }\n        }\n    }\n\n    React.useEffect(() => {\n        const numberOfCorrectResults = []\n        quizData.map(q => q.isCorrect ? numberOfCorrectResults.push(q) : \"\")\n        setNumberOfCorrectResults(numberOfCorrectResults.length)\n    }, [isCompleted])\n\n    function renderResults(event) {\n        event.preventDefault()\n        checkAnswers()\n        setIsCompleted(true)\n    }\n\n    function resetQuiz(event) {\n        event.preventDefault()\n        setRestarted(prevData => !prevData)\n        setIsCompleted(false)\n    }\n\n    React.useEffect(() => {\n        setQuizData(getInitialData())\n    }, [props.allQuestions])\n\n    // console.log(quizData)\n\n    const allQuestionsElement = props.allQuestions.map(q => {\n        const { question, allAnswers } = q\n        const index = props.allQuestions.indexOf(q)\n        return (\n            <Question\n                key={nanoid()}\n                question={question}\n                allAnswers={allAnswers}\n                quizData={quizData}\n                name={\"question\" + index}\n                updateData={updateData}\n                questionNumber={index}\n                isCompleted={isCompleted}\n            />\n        )\n    })\n\n    return (\n        <form className=\"quiz--form\">\n            {allQuestionsElement}\n            {isCompleted && <h3 className=\"quiz--result\">You scored {numberOfCorrectResults} of {quizData.length} correct answers</h3>}\n            {!isCompleted && <button className=\"quiz--btn\" onClick={renderResults}>CHECK ANSWERS</button>}\n            {isCompleted && <button className=\"quiz--btn\" onClick={resetQuiz}>CONTINUE</button>}\n        </form>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}